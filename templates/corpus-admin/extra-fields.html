{% extends 'base.html' %}
{% load static %}

{% block content %}
  <h1 class="my-4">Descripción del documento</h1>
  <hr class="mb-3">
  <div class="jumbotron pt-5 pb-2" id="new-doc-form-container">
      <h4>Información general</h4>
      <div class="row">
          <div class="col-6">
            <ul>
                <li>Nombre: {{ doc_name }}</li>
                <li>Archivo PDF: {{ pdf_file }}</li>
                <li>Archivo CSV: {{ csv_file_name }}</li>
            </ul>
          </div>
          <div class="col-6">
            <p>Líneas: {{ total_lines }}</p>
          </div>
      </div>
      <h4>Preview (primeras 10 líneas)</h4>
      TODO...

      <form action="{% url 'extra-fields' csv_file_name doc_name pdf_file %}" method="post" id="extra-fields-form">
      {% csrf_token %}
      <div class="form-row">
        <div class="form-group col-3">
            <div class="custom-control custom-switch">
              <input type="checkbox" class="custom-control-input"
                                     id="config-fields-switch"
                                     name="config-fields-switch"
                                     data-toggle="collapse"
                                     data-target="#collapse-extra-fields">
              <label class="custom-control-label"
                  for="config-fields-switch">Incluir campos extra</label>
            </div>
        </div>
      </div>
      <div id="collapse-extra-fields" class="collapse">
          <div class="card card-body">
              <div class="form-row">
              {% for field in fields  %}
                <div class="form-group col-6" id="{{field}}-form-field">
                  <label for="{{field}}-form-field" class="col-form-label">Tipo para:
                    <code>{{field|upper}}</code></label>
                  <select name="{{field}}" class="form-control"
                    id="{{field}}-optional-field">
                    <option value="text">Texto</option>
                    <option value="keyword">Palabras clave</option>
                  </select>
                </div>
              {% endfor %}
              </div>
          </div>
      </div>
      <div class="form-group row">
        <div class="col-md-2 pt-2">
          <a href="{% url 'new-doc' %}" class="badge badge-light">
            <i class="fa fa-arrow-left"></i> Regresar
          </a>
        </div>
        <div class="col col-md-2">
          <button type="submit" class="btn btn-primary btn-block mt-2"
              id="new-doc-btn">Guardar <i class="fa fa-save"></i></button>
        </div>
        <div class="col col-md-2">
          <button type="button" class="btn btn-danger btn-block mt-2" data-toggle="modal" data-target="#csv-format">Ayuda
            <i class="fa fa-file-excel-o"></i></button>
        </div>
      </div>
    </form>
  </div>

{% endblock %}
